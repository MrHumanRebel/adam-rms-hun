{% set newFontSize = 10 %} 

{% if type['assets']|length > 0 %}
    [
        {% if GET['checkboxes'] %}'☐',{% endif %}

        {# Megnevezés #}
        { 
            text: "{% if type['assets'][0].manufacturers_id != 1 %}{{ type['assets'][0].manufacturers_name|escape('js') }} - {% endif %}{{ type['assets'][0].assetTypes_name|escape('js') }} ", 
            style: { fontSize: '{{ newFontSize }}' },
        },

        {# Darabszám #}
        {
            text: "{{ type['assets']|length }} db",
            style: { fontSize: '{{ newFontSize }}' },
        },

        {# Tömeg #}
        {% if GET['masses'] %}
            {
                text: '{{ (type['totals']['mass'] > 0 ? type['totals']['mass']|escape('js') ~ ' kg' : '') }}',
                style: { fontSize: '{{ newFontSize }}' },
            },
        {% endif %}

        {% if project.projectsTypes_config_finance == 1 %}
            {% if GET['prices'] %}
                {
                    text: '{{ type['assets'][0].listPricePerItem|money|replace({',00':''})|escape('js') }}',
                    style: { fontSize: '{{ newFontSize }}' },
                },
                {
                    text: '{{ type['totals']['price']|money|replace({',00':''})|escape('js') }}',
                    style: { fontSize: '{{ newFontSize }}' },
                },
            {% endif %}
            {% if GET['discounts'] %}
                {
                    text: '{{ type['assets'][0].discountPercentage|money|replace({',00':''})|replace({'Ft':''})|replace({'GBP':''})|escape('js') }}%',
                    style: { fontSize: '{{ newFontSize }}' },
                },
                {
                    text: '{{ type['totals']['discountPrice']|money|replace({',00':''})|escape('js') }}',
                    style: { fontSize: '{{ newFontSize }}' },
                },
            {% endif %}
        {% endif %}
    ],
{% endif %}



{# TODO BELOW #}

{% if GET['showAll'] %}
    {% for assetAssignment in type['assets'] %}
        [
            {% if GET['checkboxes'] %}'☐',{% endif %}
            { 
                text: "{% if type['assets']|length == 1 %}{{ assetAssignment.manufacturers_id != 1 ? assetAssignment.manufacturers_name|escape("js") ~ " - " : "" }}{{ assetAssignment.assetTypes_name|escape("js") }}{% else %}{% endif %}{% if GET['showAll'] %}{{ assetAssignment.assets_tag|aTag|escape("js") }}{% endif %} {% if GET['flagsBlocks'] %}{% for flag in assetAssignment.flagsblocks.FLAG %}[F]{% endfor %}{% for flag in assetAssignment.flagsblocks.BLOCK %}[B]{% endfor %}{% endif %}{% if assetAssignment.assetsAssignments_linkedTo %}[L]{% endif %} {{ assetAssignment.assetTypes_name|escape("js") }} {% if type['assets']|length == 1 %}1 db{% else %}{{ type['assets']|length }} db{% endif %}",
                colSpan: {{ (assetAssignment.assetsAssignments_comment and GET['comments'] ? 1 : assetAssignment.assetTypes_definableFields_ARRAY|length > 0 ? (GET['comments'] ? 2 : 1) : (GET['comments'] ? 3 : 2)) }}
            },
            {{ (assetAssignment.assetsAssignments_comment and GET['comments'] ? '' : assetAssignment.assetTypes_definableFields_ARRAY|length > 0 ? (GET['comments'] ? '{},' : '') : (GET['comments'] ? '{},{},' : '{},')) }}
            {% if assetAssignment.assetsAssignments_comment and GET['comments'] %}
            {
                text: "{{ assetAssignment.assetsAssignments_comment|escape("js") }}",
                colSpan: {{ assetAssignment.assetTypes_definableFields_ARRAY|length > 0 ? '1' : '2' }}
            },
            {% if assetAssignment.assetTypes_definableFields_ARRAY|length < 1 %}{},{% endif %}        
            {% endif %}
            {% if assetAssignment.assetTypes_definableFields_ARRAY|length > 0 %}
            {
            stack: [
                {% for field in assetAssignment.assetTypes_definableFields|split(",") %}
                    {% if field != "" %}
                        '{{ field|escape("js") }}: {{ assetAssignment['asset_definableFields_' ~ loop.index]|escape("js") }}',
                    {% endif %}
                {% endfor %}
            ],
            },
            {% elseif assetAssignment.assetsAssignments_comment and GET['comments'] %} 
            ' ',
            {% endif %}
            {% if GET['masses'] %}
                '{{ assetAssignment.assets_mass != null ? assetAssignment.assets_mass|mass : (assetAssignment.assetTypes_mass != null and assetAssignment.assetTypes_mass != 0 ? assetAssignment.assetTypes_mass|mass : "") }}',
            {% endif %}
            {% if project.projectsTypes_config_finance == 1 %}
                {% if GET['prices'] %}'{{ assetAssignment.price|money|replace({',00':''})|escape('js') }}',{% endif %}
                {% if GET['discounts'] %}'{{ assetAssignment.discountPrice|money|replace({',00':''})|escape('js') }}',{% endif %}
            {% endif %}
        ], 
    {% endfor %}
{% endif %}